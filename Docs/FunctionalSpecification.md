# 가상 조이스틱 시스템 설계

## 개요
- 멀티 플랫폼 가상 조이스틱 시스템 
- 이동 방향 및 세기 입력값 산출
- 외부 시스템에 입력값 제공

## 용어

| 용어      | 설명                       | 비고                 |
| ------- | ------------------------ | ------------------ |
| 가상 조이스틱 | 화면상의 터치 기반 입력 컨트롤러       |  |
| 핸들      | 조이스틱의 움직이는 내부 원형 UI 요소   | 조작 위치 표시           |
| 배경      | 조이스틱의 고정된 외곽 원형 UI 요소    | 기준 중심              |
| 입력 벡터   | 조이스틱 드래그에 따른 2D 방향값      | (-1, -1) \~ (1, 1) |
| 반경      | 핸들이 이동 가능한 최대 거리         | UI 단위 기준           |
| 입력 세기   | 입력 벡터의 크기                | 0 \~ 1             |
| 입력 시작   | 최초 터치 시점                 |       |
| 입력 종료   | 터치 해제 시점                 |         |
| 입력 업데이트 | 터치 이동 중 방향 계산            |              |
| 외부 시스템  | 조이스틱 입력을 구독하여 사용하는 모든 시스템 | 이동, 어뷰징 감지, 애니메이션, 네트워크 등         |

## 요구 사항
- 드래그 입력 좌표 기준으로 방향벡터 계산
- 최대 반경을 초과하지 않도록 입력 클램핑 처리
- 입력값 -1~1 범위로 정규화하여 외부 제공
- 입력 해제 시 상태 자동 초기화
- 입력 이벤트 발생 시 프레임 지연 없이 즉시 반영
- 외부 시스템과 최소 결합도로 입력 제공
- 입력 데이터는 복수의 외부 시스템에서 구독 가능하도록 이벤트 또는 인터페이스로 제공

## 유스케이스

### UC1. 조이스틱 입력 시작
- 사용자가 조이스틱 영역 터치
- 입력 시작점 기록
- 입력 처리 활성화

### UC2. 조이스틱 입력 갱신
- 현재 터치 위치 계산
- 초기 위치 대비 벡터 계산
- 최대 반경 클램핑
- 정규화된 입력값 계산
- 외부 시스템에 전달

### UC3. 조이스틱 입력 종료
- 터치 해제 감지
- 입력값 초기화
- 핸들 위치 초기화

### UC4. 입력 영역 외부 터치
- 입력 무시